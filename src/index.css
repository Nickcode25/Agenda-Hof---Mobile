@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  * {
    -webkit-tap-highlight-color: transparent;
    -webkit-touch-callout: none;
  }

  html {
    -webkit-text-size-adjust: 100%;
    scroll-behavior: smooth;
  }

  body {
    @apply font-sans text-surface-900 antialiased;
    /* Removido padding-top para permitir headers coloridos até o topo */
    padding-bottom: env(safe-area-inset-bottom);
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
    /* iOS-like background */
    background-color: #f2f2f7;
    /* Prevent overscroll bounce color bleed */
    overscroll-behavior: none;
  }

  /* Altura da safe area do topo (para iPhones com notch/Dynamic Island) */
  .h-safe-top {
    height: env(safe-area-inset-top, 0px);
  }

  input, textarea, button, select {
    @apply outline-none;
    font-size: 16px; /* Prevent iOS zoom on focus */
  }

  /* iOS-style selection */
  ::selection {
    background-color: rgba(255, 149, 0, 0.3);
  }
}

@layer components {
  /* iOS-style primary button */
  .btn-primary {
    @apply bg-primary-500 text-white font-semibold py-3.5 px-6 rounded-xl
           active:opacity-80 transition-opacity disabled:opacity-40;
  }

  /* iOS-style secondary button */
  .btn-secondary {
    @apply bg-surface-100 text-surface-700 font-medium py-3 px-6 rounded-xl
           active:opacity-70 transition-opacity;
  }

  /* iOS-style text button */
  .btn-text {
    @apply text-primary-500 font-medium py-2 px-3 rounded-lg
           active:opacity-60 transition-opacity;
  }

  /* iOS-style input */
  .input {
    @apply w-full bg-white border-0 rounded-xl py-3.5 px-4
           text-surface-900 placeholder:text-surface-400
           focus:ring-0 transition-all;
    font-size: 17px;
    line-height: 22px;
  }

  /* iOS grouped input style */
  .input-grouped {
    @apply w-full bg-transparent border-0 py-3 px-0
           text-surface-900 placeholder:text-surface-400
           focus:ring-0;
    font-size: 17px;
    line-height: 22px;
  }

  /* Fix date input styling to match other inputs */
  input[type="date"].input {
    @apply text-surface-900;
    color-scheme: light;
  }

  input[type="date"].input::-webkit-datetime-edit {
    @apply text-surface-900;
  }

  input[type="date"].input::-webkit-datetime-edit-text,
  input[type="date"].input::-webkit-datetime-edit-month-field,
  input[type="date"].input::-webkit-datetime-edit-day-field,
  input[type="date"].input::-webkit-datetime-edit-year-field {
    @apply text-surface-900;
  }

  /* Placeholder style when no value */
  input[type="date"].input:not(:valid)::-webkit-datetime-edit {
    @apply text-surface-400;
  }

  /* iOS-style card */
  .card {
    @apply bg-white rounded-xl p-4;
    box-shadow: 0 0 0 0.5px rgba(0, 0, 0, 0.04);
  }

  /* iOS-style grouped list container */
  .ios-list {
    @apply bg-white rounded-xl overflow-hidden;
    box-shadow: 0 0 0 0.5px rgba(0, 0, 0, 0.04);
  }

  /* iOS-style list item */
  .ios-list-item {
    @apply flex items-center justify-between px-4 py-3 bg-white
           active:bg-surface-100 transition-colors relative;
    min-height: 44px;
  }

  /* iOS-style list separator */
  .ios-list-item:not(:last-child)::after {
    content: '';
    position: absolute;
    left: 16px;
    right: 0;
    bottom: 0;
    height: 0.5px;
    background-color: rgba(0, 0, 0, 0.1);
  }

  /* iOS-style section header */
  .ios-section-header {
    @apply text-[13px] font-normal text-surface-500 uppercase tracking-wide
           px-4 py-1.5 bg-transparent;
  }

  /* iOS-style navigation bar (header) */
  .ios-navbar {
    @apply sticky top-0 z-20;
    background: rgba(249, 249, 251, 0.94);
    backdrop-filter: saturate(180%) blur(20px);
    -webkit-backdrop-filter: saturate(180%) blur(20px);
    border-bottom: 0.5px solid rgba(0, 0, 0, 0.1);
  }

  /* iOS-style tab bar */
  .ios-tabbar {
    @apply fixed bottom-0 left-0 right-0 z-20 pb-safe-bottom;
    background: rgba(249, 249, 251, 0.94);
    backdrop-filter: saturate(180%) blur(20px);
    -webkit-backdrop-filter: saturate(180%) blur(20px);
    border-top: 0.5px solid rgba(0, 0, 0, 0.1);
  }

  /* iOS-style floating action button */
  .ios-fab {
    @apply w-14 h-14 rounded-full flex items-center justify-center
           active:scale-95 transition-transform shadow-lg;
  }
}

/* Esconde scrollbar mas permite scroll */
.hide-scrollbar {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

.hide-scrollbar::-webkit-scrollbar {
  display: none;
}

/* Animação slide up para modais */
@keyframes slide-up {
  from {
    transform: translateY(100%);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

.animate-slide-up {
  animation: slide-up 0.3s ease-out;
}

/* Safe area bottom para modais */
.safe-area-bottom {
  padding-bottom: env(safe-area-inset-bottom, 16px);
}
